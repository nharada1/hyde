---
layout: post
title: Paper Review - Optimization of Sequence Queries in Database Systems 
category: eecs584
---
Time series data has important applications in finance, biology, business, and many other disciplines. Additionally, time series analysis has gained traction in the machine learning and data mining community as a method of non-linear system analysis. This paper, written in 2001 at UCLA, offers a look at how to deal with time series data in the context of a database query. Especially in cases where large amounts of data are stored over time (eg stock market), efficient and easy queries on the database should be possible. For traditional DBMSes and standard SQL, it is difficult to concisely and efficiently create time series queries. 

This paper begins by proposing an extension to the SQL language, called SQL-TS. This superset of SQL includes several constructs to deal with time series data. Of most importance is the FROM .. AS clause that will preserve time series ordering in query requests. This clause can contain star (wildcard) terms to allow for an variable amount of data returned while maintaining proper ordering. This is a powerful construct in terms of expressiveness, and to me is the major syntactical contribution of this paper. SQL-TS also includes CLUSTER BY and SEQUENCE BY clauses to simplify return ordering.

The most important contribution of this paper is the actual implementation of an efficient search method in time series databases, modeled after the Knuth-Morris-Pratt string search algorithm. The KMP algorithm uses data available in the search string itself to prevent backtracking. Starting from the beginning, the algorithm compares corresponding characters until matching fails. However, if the matching fails after *i* matches, the algorithm remembers the previous comparisons to potentially skip comparing up to *i* characters of the string its searching through. The paper introduces a heavily generalized method of the KMP string search that they call Optimized Pattern Search. This search generalizes KMP to support general predicates and more general objects. Importantly, the new algorithm also includes support for wildcard queries, which is a powerful feature of the SQL-TS language. The algorithm cleverly captures all pairwise relations between pattern elements by computing "precondition logic matricies", and uses shifts within these matricies to define pattern matches.

The experimental results in this paper are quite weak. The authors use a single experiment to test their algorithm. One of the primary strengths of the KMP algorithm is that is offers a good worst case runtime. General, random string searches will likely perform just as well with a naive search when compared to KMP. However, in corner cases, such as long repeating elements, the naive version will degrade immensely. The tests performed here are on real data only, and with complex queries that may or may not represent real world loads. There is also no mention of space complexity for this method, or a comparison of this methods space requirements to a naive pattern match (which, admittedly, would not support most functions of OPS). Lastly, I would be interested to see this algorithm of pattern matching compared to other work in the field. 
