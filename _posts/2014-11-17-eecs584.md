---
layout: post
title: 'Paper Review - CryptDB: Processing Queries on an Encrypted Database'
category: eecs584
---
Privacy is an ever-increasing concern, especially in today's always connected and cloud based world. Companies have databases with terabytes of consumer data, many of which are exploitable and unsafe. Even in cases where exploitation is not easy, there are always additional zero-day vulnerabilities (such as Heartbleed and Shell Shock) that present security threats and challenges. Thus, an encrypted database is a powerful guarantee that a user's data will remain secure, even in the event of internal compromise. This paper introduces CryptDB, a database proxy layer and extension that secures existing databases. The ideas presented are designed to work over any commercial database, although the authors use MySQL.

CryptDB's primary contribution is the idea of multiple security layers to process queries and expose only as much information is required to get a result to the DBMS. Thus, the DBMS actually has no idea what data it is storing, relying on a secured proxy to handle interactions with the user. The authors use a large variety of existing security ciphers, providing completely random encryption, order-preserving encryption, homomorphic (function preserving), word search, and join encryption. Of special note, the OPE exposes some data to the client (up to half in the worst case). The homomorphic encryption is only additively homomorphic (fully homomorphic encryption is still in its infancy). The join encryption is specially designed for CryptDB and introduces a primitive called JOIN-ADJ (adjustable join) to support joining columns unknown apriori by the proxy. The proxy operates on a per-user basis and provides a separate session for each user so that a compromised key cannot expose the entire database. This design a strong because it also prevents a malicious user from exposing the database in a cloud system where users are not fully trusted. CryptDB is built atop mysql-proxy, and includes some UDFs to the underlying MySQL implementation.

This raises the first point of vulnerability and weakness with the system - if the underlying operating system is the vulnerable system, the proxy is most likely going to be affected as well. The second weakness is that simply using the system will resolve more and more of the underlying information to the DBMS (as additional security layers are required) and will eventually expose almost all of the data eventually. This is because the order-preserving encryption leaks up to half of the data bits in the worst case. Thus, a workload could in theory expose the entire database with enough queries. The authors claim to be working on this problem and if they can fix it this will be a big improvement. Still though, eventually the lowest level of encryption will be used on all the data with enough workload.
